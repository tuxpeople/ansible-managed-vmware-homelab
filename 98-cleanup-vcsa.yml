- hosts: localhost
  gather_facts: false
  tasks:
    - name: Delete Cluster - '{{ vcenter.cluster }}'
      community.vmware.vmware_cluster:
        hostname: "{{ vcenter.hostname }}"
        username: "{{ vcenter.username }}@{{ vcenter.domain }}"
        password: "{{ vcenter.sso_password }}"
        datacenter_name: "{{ vcenter.datacenter }}"
        cluster_name: "{{ vcenter.cluster }}"
        state: absent
        validate_certs: false

    - name: Delete Datacenter - '{{ vcenter.datacenter }}'
      community.vmware.vmware_datacenter:
        hostname: "{{ vcenter.hostname }}"
        username: "{{ vcenter.username }}@{{ vcenter.domain }}"
        password: "{{ vcenter.sso_password }}"
        datacenter_name: "{{ vcenter.datacenter }}"
        state: absent
        validate_certs: false
